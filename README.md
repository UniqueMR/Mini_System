# Mini_System
基于Nexy4 FPGA的信号发生器

## 项目说明
该项目基于Xilinx公司的Nexy4 FPGA开发板打造，使用vivado作为开发工具。利用vivado中的IP核，以创建block design的方式搭建硬件平台。使用C语言进行软件模块的开发。
## 功能说明
基于Nexy4 FPGA的信号发生器可以产生锯齿波、三角波、正弦波以及方波四种信号。信号的类型、频率以及幅度可以现实在七段数码管上。利用16位开关可对信号类型进行选择，还可以调节信号的频率与幅度。
其中，switch[13]高电平为衰减，低电平为增加；switch[1 : 0]中00选择锯齿波，01选择三角波，10选择正弦波，11选择方波
## 硬件设计
利用vivado中的IP核，以创建block design的方式搭建嵌入式系统。主要模块包含microblaze微处理器、本地寄存器、中断控制器、定时器、3个GPIO核、2个UART总线模块以及2个SPI总线模块。各个模块通过AXI总线与CPU相连。定时器、3个GPIO核、2个UART总线模块以及2个SPI总线模块均可以产生中断。16位开关控制逻辑经由GPIO核输入，开关状态以及7段数码管的段码和位码均由GPIO核输出。产生的波形数字信号经由SPI总线输出，输出端口为开发板上的JB端口。输出的波形数字信号需要经过DA转换模块转换成模拟信号输出。
## 软件设计
使用C语言进行软件模块的开发。在主程序中完成对GPIO、定时器以及SPI总线模块的初始化以及中断使能，设置中断方式为硬件中断，允许微处理器接受中断请求并启动SPI传输。在主中断服务程序中，读取中断状态以及开关状态，根据中断状态选择开发者创建的中断服务程序，将开关状态转换成波形选择信号、幅度设置信号、频率调节信号以及需要七段数码管显示的段码。在波形生成模块中，根据波形选择信号，选择执行相应的波形生成模块，并将幅度设置信号与频率调节信号传入各个波形生成模块，实现对频率和幅度的调节。
## 备注
* 由于vivado sdk中的C语言版本不支持传引用调用函数，为编写程序的方便，采用C++编译器对工程进行编译。程序的编写依旧采用C语言风格。
* 本项目基于华中科技大学 模拟电路与数字系统（三）的实验课程。更多资源请参考课程相关的课本以及mooc。
* 如果您觉得本项目对您有帮助，请不要吝啬您的star，这对开发者是非常大的鼓励。如果您对此项目有任何的疑惑或想法，随时可以交流。再次由衷感谢您的支持。
